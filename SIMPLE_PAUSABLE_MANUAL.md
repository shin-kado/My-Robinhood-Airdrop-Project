# 緊急停止機能付き一括配布操作マニュアル（SimpleAirDropPausable）  
<br>

## 📖 機能説明：SimpleAirDropPausable  
この手順書は、Remixを使用して、管理者による実行制御が可能な**「緊急停止機能付き一括配布（SimpleAirDropPausable）」**を安全に運用するための標準マニュアルです。  
この緊急停止機能「サーキットブレーカー」を搭載 した一括配布用スマートコントラクトは標準的な一括送金機能に加え、管理者による実行制御ロジックを統合しています。市場の急変や設定ミスなどの緊急時に、スイッチ一つで配布処理を停止し、安全性を確保した運用を可能にします。  

## 運用ポリシー  
「配布準備（Approve）完了後から、実際の配布（sendTokens）開始直前までの間は、原則として paused 状態を true（停止中）に維持し、最終確認が完了した瞬間にのみ解除を行う運用を推奨する。」   
<br>

## ステップ1. 事前準備（Approve：トークンの使用許可）  

　　一括送金を行う前に、コントラクトが自分の代わりにトークンを動かすための許可を与える必要があります。    

### 　　1. トークン（MRT）のコントラクト画面を開く。  

　　　　　　・File ExploreでMyTokenを選択しコンパイル。  
　　　　　　・Deploy & run transactions でAt Addressに送金したいトークンのアドレスを入力しAt Addressをクリックし展開する。  
### 　　2. 展開したMyTokenでapprove 関数を選択する。  

### 　　3. spender に SimpleAirDropPausableのコントラクトアドレス を入力する。  

### 　　4. amount に配布する合計数量を 最小単位（18桁の0を考慮） で入力し、実行（Transact）する。  

### 　　⚠️ 注意事項  
　　　　　amount の桁数を間違えると、後の sendTokens でエラー（不足）が発生します。  

### 　　💡 コツ  
　　　　　approve は「上書き」が可能です。もし金額を間違えたら、正しい金額で再度実行すれば上書きされます。  
<br>

## ステップ2. 緊急停止機能の制御（setPaused）  

　　予期せぬトラブル時にコントラクトの全機能をストップさせるための安全装置です。  
  
### 　　1. SimpleAirDropPausable コントラクトの setPaused 関数を開く。  

### 　　2. 停止させる場合は true、再開させる場合は false を入力して実行する。  

### 　　3. 青色の paused ボタン（状態確認ボタン）を押し、意図した状態（true/false）になっているか指差し確認する。  
### 　　⚠️ 注意事項  
　　　　　この操作は Owner（管理者）のアドレス でしか実行できません。  

### 　　💡 コツ  
　　　　　本番配布前には、一度 true にして「わざと送金に失敗する」テストを行うことで、安全装置が正しく機能しているか確認できます。  
<BR>

## ステップ3. 一括送金の実行（sendTokens）  

実際に複数のアドレスへトークンを一斉に配布します。  

### 　　1. paused が false であることを確認する。  
        
### 　　2. tokenAddress に配布するトークンのアドレスを入力する。  

### 　　3. recipients に受取人のアドレス配列（["0x...","0x..."] 形式）を入力する。  

### 　　4. amount に1人あたりの配布量を入力し、実行する。  

### 　　⚠️ 注意事項  
　　　　　配布前に ガス代（ETH）の残高 が十分にあるか確認してください。残高が極端に少ないと、MetaMaskがシミュレーションに失敗し、警告（赤い⚠マーク）を出すことがあります。  
### 　　💡 コツ  
　　　　　MetaMaskの確認画面で「ネットワーク手数料」に警告が出た場合は、無理に送信せず、一度「キャンセル」して paused の状態やガス代残高を見直してください。  
